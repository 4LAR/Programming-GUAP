/*
  –ó–∞–¥–∞–Ω–∏—è –Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—É—é —Ä–∞–±–æ—Ç—É –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ. –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º
  –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ, —Ç–∞–∫ –∏ –Ω–µ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Å—Å–∏–≤—ã. –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö
  –∑–∞–¥–∞—ê—Ç—Å—è –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π.

  –í–∞—Ä–∏–∞–Ω—Ç 12
    –í –æ–¥–Ω–æ–º–µ—Ä–Ω–æ–º –º–∞—Å—Å–∏–≤–µ, —Å–æ—Å—Ç–æ—è—â–µ–º –∏–∑ n –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –≤—ã—á–∏—Å–ª–∏—Ç—å:
    1. –Ω–æ–º–µ—Ä –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ –º–æ–¥—É–ª—é —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞;
    2. —Å—É–º–º—É –º–æ–¥—É–ª–µ–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ
    —ç–ª–µ–º–µ–Ω—Ç–∞.
  –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã —Å–Ω–∞—á–∞–ª–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–ª–∏—Å—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, —Ü–µ–ª–∞—è
  —á–∞—Å—Ç—å –∫–æ—Ç–æ—Ä—ã—Ö –ª–µ–∂–∏—Ç –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ ùëé, ùëè , –∞ –ø–æ—Ç–æ–º ‚Äì –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ.

*/

#include <iostream>
using namespace std;

#include "libs/lib.h"
#include <cmath>

// –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–≤–æ–¥–∞
#include "libs/simple_char.h"
#include "libs/input_validation.h"

int main() {
	// —Å–º–µ–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
  system("chcp 65001");

  draw_line(20);

  // –≤–≤–æ–¥ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞

  int size = read_value("–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞: ", false, false, false);
  double *arr = (double*) malloc(size * sizeof(double));

  for (int i = 0; i < size; i++){
    cout << "array [" << i << "] = ";
    arr[i] = read_value("", true, true, false);
  }

  draw_line(20);

  // –≤—ã–≤–æ–¥–∏–º –º–∞—Å—Å–∏–≤
  draw_float_array(arr, size);

  draw_line(20);

  // –ù–æ–º–µ—Ä –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ –º–æ–¥—É–ª—é —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
  int max_id = 0;
  for (int i = 1; i < size; i++) {
    if (fabs(arr[i]) > fabs(arr[max_id]))
      max_id = i;
  }

  cout << "–ù–æ–º–µ—Ä –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ –º–æ–¥—É–ª—é —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞: " << max_id << endl;

  // –°—É–º–º–∞ –º–æ–¥—É–ª–µ–π –ø–æ—Å–ª–µ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
  bool positive = false;
  float summ = 0;
  for (int i = 0; i < size; i++) {
    if (!positive && arr[i] > 0) {
      positive = true;
    } else if (positive){
      summ += fabs(arr[i]);
    }
  }

  if (!positive)
    cout << "–í –º–∞—Å—Å–∏–≤–µ –Ω–µ—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞\n";
  else
    cout << "–°—É–º–º–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –ø–æ—Å–ª–µ 1 –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞: " << summ << endl;

  draw_line(20);

  // –≤–≤–æ–¥ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
  int a, b, k;
  cout << "–í–≤–µ–¥–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω [a, b]\n";
  while (true) {
    a = read_value("A = ", false, false, false);
    b = read_value("B = ", false, false, false);

    // –º–µ–Ω—è–µ–º –º–µ—Å—Ç–∞–º–∏ —á–∏—Å–ª–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Ö –ø–µ—Ä–µ–ø—É—Ç–∞–ª
    if (a > b) {
      k = a;
      a = b;
      b = k;
    }

    // –µ—Å–ª–∏ —á–∏—Å–ª–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, —Ç–æ –≤–≤–æ–¥–∏–º –∑–∞–Ω–æ–≤–æ
    if (a == b) {
      cout << "A –∏ B –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏." << endl;
      draw_line(20);

    }else if (a >= size || b >= size) {
      cout << "A –∏ B –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –º–∞—Å—Å–∏–≤–∞." << endl;
      draw_line(20);

    }
     else {
      // –µ—Å–ª–∏ –≤—Å—ë –æ–∫ –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
      break;
    }

  }

  // –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –º–∞—Å—Å–∏–≤
  double *new_arr = (double*) malloc(size * sizeof(double));
  int j = 0;
  for (int i = a; i < b + 1; i++){
    new_arr[i] = arr[j++];
  }

  for (int i = 0; i < size; i++) {
    if (i < a || i > b)
      new_arr[i] = arr[j++];
  }

  // –≤—ã–≤–æ–¥–∏–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤
  draw_line(20);
  draw_float_array(new_arr, size);
  draw_line(20);

  // —É–¥–∞–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤
  delete(arr);
  delete(new_arr);

	return 0;
}
